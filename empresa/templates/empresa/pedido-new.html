{% extends 'global/base-admin.html' %}
{% block titulo %}
  Pedido | New
{% endblock %}
{% block main %}
  {% load filtros %}
<form method="post" action="{% url "empresa:save-pedido" %}">
  {% csrf_token %}
  <div class="pedido-detail-conteiner">
    <div class="cliente">
      <h2>Cliente</h2>
      {{ form.cliente }}

    </div>
    <hr />
    <div class="pedido">
      <span style="display:none;">{{ form.empresa }}</span>
      <span style="display:none;">{{ form.codigo }}</span>
      <h2>Pedido</h2>
      {{ form.data_entrega.label_tag }}
      {{ form.data_entrega }}
      {{ form.produto.label_tag }}
      {{ form.produto }}
      {{ form.observacao.label_tag }}
      {{ form.observacao }}
      {{ form.status.label_tag }}
      {{ form.status }}
      <div class="valores">
        <span>
          {{ form.quantidade.label_tag }}
          {{ form.quantidade }}
        </span>
        <span>
          {{ form.valor.label_tag }}
          {{ form.valor }}
        </span>
        <span style="display:none;">
          {{ form.valor_total }}
        </span>
        <span>
          {{ form.pago.label_tag }}
          {{ form.pago }}
        </span>
      </div>
      <button type="submit">Salvar</button>
    </div>
  </div>
</form>
<script>

   
    var add = document.querySelector('.add-related')
    add.addEventListener('click', event =>{
      event.preventDefault();
      popup2 = window.open(add.href , "popup2", "width=600,height=650");})
      var intervalo = setInterval(function() {
        if (popup2.closed) {
            clearInterval(intervalo); // Limpa o intervalo quando o pop-up for fechado
            location.reload(); // Recarrega a página atual
        }
    }, 1000);
    document.getElementsByTagName('form')[0].addEventListener('submit', function(event) {
  
      // Define um atraso de 2 segundos (2000ms)
      setTimeout(function() {
          window.alert('Pedido Salvo!');
          window.close(); // Fecha a janela após 2 segundos
      }, 900);
  });
</script>

{% endblock %}

